{% load static %}
{% load i18n %}
{% load notification_count %}
{% load new_notification_count %}

<!-- Navbar -->
<nav class="main-header navbar navbar-expand navbar-dark">
    <!-- Left navbar links -->
    <ul class="navbar-nav">
        {#        <li class="nav-item">#}
        <li class="nav-link" data-widget="pushmenu" role="button"><i class="fas fa-bars"></i>
        </li>
        <li class="nav-item d-none d-sm-inline-block">
            <a href="{% url 'information' %}" class="nav-link">{% trans 'Information' %}</a>
        </li>
        {% if user.is_authenticated %}
            <li class="nav-item d-none d-sm-inline-block">
                <a href="{% url 'files' %}" class="nav-link">{% trans 'Files' %}</a>
            </li>
        {% endif %}
        <li class="nav-item d-none d-sm-inline-block">
            <a href="{% url 'documentations' %}" class="nav-link">{% trans 'Documents' %}</a>
        </li>
        <li class="nav-item d-none d-sm-inline-block">
            <a href="{% url 'tutorials' %}" class="nav-link">{% trans 'Tutorials' %}</a>
        </li>
        <li class="nav-item d-none d-sm-inline-block">
            <a href="{% url 'faq' %}" class="nav-link">FAQ</a>
        </li>
    </ul>

    <!-- SEARCH FORM -->
    {#        <form class="form-inline ml-3">#}
    {#          <div class="input-group input-group-sm">#}
    {#            <input class="form-control form-control-navbar" type="search" placeholder="Search" aria-label="Search">#}
    {#            <div class="input-group-append">#}
    {#              <button class="btn btn-navbar" type="submit">#}
    {#                <i class="fas fa-search"></i>#}
    {#              </button>#}
    {#            </div>#}
    {#          </div>#}
    {#        </form>#}


    <!-- Right navbar links -->
    <ul class="navbar-nav ml-auto">
        <!-- Notifications Dropdown Menu -->
        {% if user.is_authenticated %}
            <li class="nav-item dropdown">
                <a class="nav-link" data-toggle="dropdown" href="#">
                    <i class="far fa-bell"></i>
                    <span class="badge badge-warning navbar-badge">{% new_notification_count request.user %}</span>
                </a>
                <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
                    <span class="dropdown-header">{% trans 'Total notifications'%}: {% notification_count request.user %} </span>
                    <div class="dropdown-divider"></div>
                    <div class="dropdown-divider"></div>
                    <div class="dropdown-item">
                        <a href="{% url 'notifications' %}?new=False" class="dropdown-item dropdown-footer"><i
                                class="fas fa-envelope mr-2"></i>{% trans 'New Notifications' %}: {% new_notification_count request.user %}
{#                        <span class="float-right text-muted text-sm">3 mins</span>#}
                        </a>
                    </div>
                </div>
            </li>
        {% endif %}
        <!-- User Menu -->
        <li class="nav-item dropdown user-menu">
            {% if user.is_authenticated %}
                {#                {% if user.profile.role == 1 %}#}
                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">
                    <span class="d-none d-md-inline">{{ user.profile.name }}</span>
                </a>
                <ul class="dropdown-menu dropdown-menu-lg dropdown-menu-right">

                    <li class="user-header bg-primary">
                        <p>{{ user.profile.name }}</p>
                        <p>{{ user.get_username }}</p>
                        <p>{{ user.profile.company }}</p>
                        <small>{{ user.profile.get_role_display }}</small>
                    </li>

                    <!-- Menu Footer-->
                    <li class="user-footer">
                        <a href="{% url 'change_password' %}"
                           class="btn btn-default btn-flat">{% trans 'Change Password' %}</a>
                        <a href="{% url 'logout' %}?next={% url 'information' %}"
                           class="btn btn-default btn-flat float-right">{% trans 'Logout' %}</a>
                    </li>
                </ul>
            {% else %}
                <a href="{% url 'login' %}?next={% url 'information' %}"
                   class="btn btn-default btn-flat float-right">{% trans 'Login' %}</a>
            {% endif %}


            <!-- Language Dropdown Menu -->
        {% get_current_language as LANGUAGE_CODE %}

        <li class="nav-item dropdown">
            {% if LANGUAGE_CODE == 'en' %}
                <a class="nav-link" data-toggle="dropdown" href="#">
                    <i class="flag-icon flag-icon-gb"></i>
                </a>
            {% else %}
                <a class="nav-link" data-toggle="dropdown" href="#">
                    <i class="flag-icon flag-icon-ru"></i>
                </a>
            {% endif %}

            <div class="dropdown-menu dropdown-menu-right p-0">

                <div class="lang">
                    <form id='lang_en' action='{% url 'set_language' %}' method='POST'>{% csrf_token %}
                        <input type='hidden' name='language' value='en'/>
                        <a href='#' title='English' onclick="document.getElementById('lang_en').submit()">
                            <i class="flag-icon flag-icon-gb mr-2"></i> English
                        </a>
                    </form>

                    <form id='lang_ru' action='{% url 'set_language' %}' method='POST'>{% csrf_token %}
                        <input type='hidden' name='language' value='ru'/>
                        <a href='#' title='Russian' onclick="document.getElementById('lang_ru').submit()">
                            <i class="flag-icon flag-icon-ru mr-2"></i> Русский
                        </a>
                    </form>
                </div>
            </div>
        </li>
    </ul>
</nav>
<!-- /.navbar -->